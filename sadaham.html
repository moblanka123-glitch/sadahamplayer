<!DOCTYPE html>
<html lang="si">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sadaham Player</title>
  <style>
    body {
      font-family: sans-serif;
      background: linear-gradient(120deg, #2e3a59, #4e84a2);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      color: white;
    }

    .player-container {
      background: rgba(255, 255, 255, 0.08);
      padding: 20px;
      border-radius: 16px;
      width: 100%;
      max-width: 560px;
      text-align: center;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    }

    .player-title {
      font-size: 24px;
      font-weight: bold;
      margin-bottom: 12px;
    }

    iframe {
      width: 100%;
      height: 140px;
      border: none;
      border-radius: 10px;
      margin-bottom: 12px;
      cursor: pointer;
    }

    .label {
      font-size: 18px;
      margin-bottom: 6px;
    }

    .progress-wrapper {
      height: 20px;
      width: 100%;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      overflow: hidden;
      margin-bottom: 6px;
    }

    .progress-bar {
      height: 100%;
      width: 0%;
      transition: width 1s ease;
    }

    .pin-bar { background: linear-gradient(to right, #aef9ae, #3ddc84); }
    .paw-bar { background: linear-gradient(to right, #ff8080, #d9534f); }

    .percent { font-weight: bold; margin-bottom: 12px; }

    .quote-box {
      font-style: italic;
      font-size: 14px;
      margin-top: 12px;
      color: #fff7d6;
      min-height: 24px;
    }

    .username {
      font-size: 18px;
      margin-bottom: 8px;
    }

    .controls {
      display:flex;
      gap:8px;
      justify-content:center;
      margin-top:8px;
      flex-wrap: wrap;
    }

    .btn {
      background: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,255,255,0.12);
      padding: 8px 12px;
      border-radius: 8px;
      color: white;
      cursor: pointer;
      font-size: 14px;
    }
    .btn:hover { transform: translateY(-2px); }

    /* Modal */
    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.6);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 999;
    }
    .modal {
      background: #fff;
      color: #222;
      padding: 18px;
      border-radius: 12px;
      width: 90%;
      max-width: 420px;
      box-shadow: 0 8px 40px rgba(0,0,0,0.5);
    }
    .modal h3 { margin-top:0; }
    .modal input[type="text"] {
      width:100%;
      padding:8px;
      margin-top:8px;
      border-radius:8px;
      border:1px solid #ccc;
      font-size:16px;
    }
    .modal .row { display:flex; gap:8px; justify-content:flex-end; margin-top:12px; }
    .modal .row .btn { background:#2e3a59; color:#fff; border:none; padding:8px 12px; }
    .day-lakna {
      margin-top: 16px;
      font-size: 18px;
      font-weight: bold;
      color: #ffe;
    }
  </style>
</head>
<body>

  <div class="player-container">
    <div class="player-title">üéß Sadaham Player</div>

    <!-- Username label -->
    <div class="username" id="usernameLabel" style="display:none;"></div>

    <!-- Embedded player -->
    <iframe id="playerIframe" src="https://archive.org/embed/sadaham-mp-3" title="Sadaham audio"></iframe>
<div style="text-align: center;">
  <a href="https://wa.me/message/ALT2ZWLVEP7HJ1" target="_blank">
    <img 
      src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEisujsZxoN05bvybrbzq4IjnC_ojtPnPyax2wQrHhHbJN-QoYmYIQ3mttCamTMlyYICn8RRNvG6FLbFy6wZ7fOACUHoKigyB9VaLJSBJuSMYiXEjNcF6idJBXtsc64d6IpD5Zb00piIqmiCMHPVOsCYntwdz0F4u2wcNxBYQQpHwhUEb0eJO7RoA_1JmuAZ/s320/My%20ads%202.png" 
      style="width: 100%; max-width: 320px; height: auto; border: 0;"
      alt="WhatsApp Link"
    />
  </a>
</div>

    <!-- Pin Bar -->
    <div class="label">üåø ‡∂î‡∂∂‡∑ö ‡∂¥‡∑í‡∂Ç</div>
    <div class="progress-wrapper">
      <div class="progress-bar pin-bar" id="pinBar"></div>
    </div>
    <div class="percent">üìà <span id="pinPercent">0</span>%</div>

    <!-- Paw Bar -->
    <div class="label">üî• ‡∂î‡∂∂‡∑ö ‡∂¥‡∑Ä‡∑î</div>
    <div class="progress-wrapper">
      <div class="progress-bar paw-bar" id="pawBar"></div>
    </div>
    <div class="percent">üìâ <span id="pawPercent">100</span>%</div>

    <div class="quote-box" id="quoteBox">ü™∑ ‡∑É‡∂±‡∑ä‡∑É‡∑î‡∂±‡∑ä‡∑Ä ‡∑É‡∑Ä‡∂±‡∑ä ‡∂Ø‡∑ô‡∂±‡∑ä‡∂±...</div>

    <!-- Day Lakna -->
    <div class="day-lakna" id="dayLakna"></div>

    <div class="controls">
      <button class="btn" id="enterNameBtn">‡∂±‡∂∏ ‡∂á‡∂≠‡∑î‡∑Ö‡∂≠‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±</button>
      <button class="btn" id="resetBtn">‡∂Ø‡∑í‡∂±‡∂ß Reset ‡∂ö‡∂ª‡∂±‡∑ä‡∂±</button>
      <button class="btn" id="clearAllBtn">‡∑É‡∑í‡∂∫‡∂Ω‡∑ä‡∂Ω ‡∂â‡∑Ä‡∂≠‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±</button>
    </div>
  </div>

  <!-- Modal to enter name -->
  <div class="modal-backdrop" id="modalBackdrop">
    <div class="modal">
      <h3>‡∂î‡∂∫‡∑è‡∂ú‡∑ö ‡∂±‡∂∏ ‡∂á‡∂≠‡∑î‡∑Ö‡∂≠‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±</h3>
      <input type="text" id="nameInput" placeholder="‡∂î‡∂∫‡∑è‡∂ú‡∑ö ‡∂±‡∂∏ (‡∂ã‡∂Ø‡∑è: Kumara)" />
      <div class="row">
        <button class="btn" id="cancelModal">‡∂±‡∂∏‡∑Ä‡∑ô‡∂±‡∑É‡∑ä ‡∂ö‡∂ª‡∂±‡∑Ä</button>
        <button class="btn" id="saveNameBtn">‡∑É‡∑î‡∂ª‡∂ö‡∑í‡∂±‡∑ä‡∂±</button>
      </div>
    </div>
  </div>

  <script>
    // Elements
    const pinBar = document.getElementById('pinBar');
    const pawBar = document.getElementById('pawBar');
    const pinPercent = document.getElementById('pinPercent');
    const pawPercent = document.getElementById('pawPercent');
    const quoteBox = document.getElementById('quoteBox');
    const usernameLabel = document.getElementById('usernameLabel');
    const iframeEl = document.getElementById('playerIframe');
    const modalBackdrop = document.getElementById('modalBackdrop');
    const nameInput = document.getElementById('nameInput');
    const enterNameBtn = document.getElementById('enterNameBtn');
    const saveNameBtn = document.getElementById('saveNameBtn');
    const cancelModal = document.getElementById('cancelModal');
    const resetBtn = document.getElementById('resetBtn');
    const clearAllBtn = document.getElementById('clearAllBtn');
    const dayLakna = document.getElementById('dayLakna');

    // State
    let state = {
      pin: 0,
      paw: 100,
      name: null,
      date: (new Date()).toDateString()
    };

    // Dharma Quotes
    const quotes = [
      "‡∑É‡∂ö‡∑î‡∑É‡∂Ω‡∑ä ‡∑Ä‡∂©‡∂±‡∑ä‡∂± ü™∑",
      "‡∂¥‡∑Ä‡∑ä ‡∂Ø‡∑î‡∂ª‡∂Ω‡∂±‡∑ä‡∂± ‡∂¥‡∑í‡∂Ç ‡∑Ä‡∑ê‡∂©‡∑í ‡∂ö‡∂ª‡∂±‡∑ä‡∂± üåø",
      "‡∑É‡∑ê‡∂∏‡∂ß ‡∂ö‡∂ª‡∑î‡∂´‡∑è ‡∂ö‡∂ª‡∂±‡∑ä‡∂± üßò",
      "‡∂∫‡∑Ñ‡∂¥‡∂≠‡∑ä ‡∂ö‡∂∏‡∑ä ‡∑É‡∂Ø‡∑è ‡∂¥‡∑í‡∂Ç ‡∂ú‡∑ô‡∂±‡∑ö ‚ú®"
    ];

    // Load state
    function loadState() {
      const raw = localStorage.getItem('sadahamState');
      if (raw) {
        const saved = JSON.parse(raw);
        const today = (new Date()).toDateString();
        if (saved.date !== today) {
          state.name = saved.name || null;
          state.pin = 0;
          state.paw = 100;
          state.date = today;
        } else {
          state = Object.assign(state, saved);
        }
      }
      saveState();
      applyNameToUI();
      updateUI();
      checkLakna();
    }

    function saveState() {
      localStorage.setItem('sadahamState', JSON.stringify(state));
    }

    function applyNameToUI() {
      if (state.name && state.name.trim().length > 0) {
        usernameLabel.style.display = 'block';
        usernameLabel.textContent = `${state.name}‡∂ú‡∑ö ‡∂¥‡∑í‡∂Ç`;
      } else {
        usernameLabel.style.display = 'none';
      }
    }

    function updateUI() {
      state.paw = 100 - state.pin;
      if (state.paw < 0) state.paw = 0;
      pinBar.style.width = state.pin + '%';
      pawBar.style.width = state.paw + '%';
      pinPercent.textContent = Math.floor(state.pin);
      pawPercent.textContent = Math.floor(state.paw);

      if (Math.random() > 0.6) {
        quoteBox.textContent = quotes[Math.floor(Math.random() * quotes.length)];
      }

      if (state.pin >= 100 && !state._pinDone) {
        alert("üåü ‡∂¥‡∑í‡∂Ç ‡∂¥‡∑í‡∂ª‡∑î‡∂´‡∑è! ‡∂≠‡∑Ä ‡∂¥‡∑í‡∂±‡∑ä ‡∂ª‡∑ê‡∑É‡∑ä‡∂ö‡∂ª‡∂±‡∑ä‡∂±");
        state._pinDone = true;
      }
      if (state.paw >= 100 && !state._pawDone) {
        alert("‚ö†Ô∏è ‡∂¥‡∑Ä‡∑ä ‡∑Ä‡∑ê‡∂©‡∑í ‡∑Ä‡∑î‡∂´‡∑è! ‡∂±‡∑ê‡∑Ä‡∂≠ ‡∂Ö‡∑Ñ‡∂±‡∑ä‡∂± ");
        state._pawDone = true;
      }
      saveState();
    }

    // Lakna check
    function checkLakna() {
      const today = new Date();
      const y = today.getFullYear();
      const m = today.getMonth() + 1;
      const d = today.getDate();
      let sum = [...(y+""+m+d)].map(Number).reduce((a,b)=>a+b,0);
      while (sum > 9) {
        sum = sum.toString().split('').map(Number).reduce((a,b)=>a+b,0);
      }
      if ([1,3,5,7,9].includes(sum)) {
        dayLakna.textContent = `üåü ‡∂Ö‡∂Ø (${d}/${m}/${y}) ‡∂î‡∂∂‡∂ß ‡∑É‡∑î‡∂∂ ‡∂Ø‡∑í‡∂±‡∂∫‡∂ö‡∑ä!`;
      } else {
        dayLakna.textContent = `‚ö†Ô∏è ‡∂Ö‡∂Ø (${d}/${m}/${y}) ‡∂î‡∂∂‡∂ß ‡∂Ö‡∑É‡∑î‡∂∂ ‡∂Ø‡∑í‡∂±‡∂∫‡∂ö‡∑ä.`;
      }
    }

    // Modal helpers
    function showModal() { modalBackdrop.style.display = 'flex'; nameInput.value = state.name || ''; }
    function hideModal() { modalBackdrop.style.display = 'none'; }

    iframeEl.addEventListener('click', () => {
      if (!state.name) showModal();
    });

    enterNameBtn.addEventListener('click', showModal);
    saveNameBtn.addEventListener('click', () => {
      const val = nameInput.value.trim();
      if (val) state.name = val;
      applyNameToUI();
      saveState();
      hideModal();
    });
    cancelModal.addEventListener('click', hideModal);

    resetBtn.addEventListener('click', () => {
      state.pin = 0; state.paw = 100; state.date = (new Date()).toDateString();
      state._pinDone = false; state._pawDone = false;
      saveState(); updateUI();
    });

    clearAllBtn.addEventListener('click', () => {
      localStorage.removeItem('sadahamState');
      state = {pin:0,paw:100,name:null,date:(new Date()).toDateString()};
      applyNameToUI(); updateUI(); checkLakna();
    });

    // Simulate listening: every 5s increase pin
    setInterval(() => {
      if (state.pin < 100) {
        state.pin += 2;
        if (state.pin > 100) state.pin = 100;
        updateUI();
      }
    }, 5000);

    loadState();
  </script>
</body>
</html>



